<!doctype html><html lang=ja><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
<link rel=stylesheet href=/sass/main.min.6b310111c019be6dd09332707e7917cd0f390efac00d80d7beb9b9407a671740.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity=sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js integrity=sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script defer>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<script defer src=/js/prism.min.js></script>
<link rel=stylesheet href=/css/prism.min.css>
</head>
<body>
<main id=content>
<p class=category>
カテゴリー: <a href=/writeup>writeup</a>
</p>
<article class=suuri><h1 id=garbage-bags-optimization---cpctf-2022>Garbage Bags Optimization - CPCTF 2022</h1>
<h2 id=概要>概要</h2>
<p>ある列を部分和でまとめて全体の個数を $K$ 個以下にする時に、その最大値を最小化する問題。二分探索を用いて解く。</p>
<h2 id=詳細>詳細</h2>
<h3 id=問題概要>問題概要</h3>
<p>$N$ 日分のゴミ袋が必要になった。容量 $S$ のゴミ袋を $K$ 個購入する。ゴミ箱 $1$ から $K$ について、以下のようにゴミを捨てる。</p>
<ul>
<li>$i$ 日目( $1 \leq i \leq N$ )に大きさ $A_i$ のゴミを捨てる</li>
<li>ゴミ箱に溢れかえらないように順にゴミを入れる。この時、溢れるようなら次の番号のゴミ箱を選択する。</li>
<li>順に埋めていき、最後にゴミ箱が溢れないとき成功とする。</li>
</ul>
<p>成功するような $S$ の最小値を求めよ。</p>
<p>制約</p>
<ul>
<li>$N \leq 10^5$</li>
<li>$K \leq N$</li>
<li>$A_i \leq 10^9$</li>
</ul>
<h3 id=解法>解法</h3>
<p>数列 $A$ を $K$ 個以下の区間で区切る、それぞれの区間和の値の最大のものを最小化する問題。最大値の最小化は二分探索なので、二分探索を用いる。<br>
二分探索の範囲は $1$ 以上 $\sum A_i$ 以下なので計算量は $O(\log(\sum A_i))$ 、各イテレーションにおけるチェックはゴミを順に捨てるシミュレーションを行う。シミュレーションは日数分行うので $O(N)$ で、合わせて $O(N\log(\sum A_i))$ の計算量で行える。</p>
<h3 id=実装>実装</h3>
<p><code>check()</code> と <code>binsearch()</code> の二つの関数を実装する。 <code>check()</code> はシミュレーション、 <code>binsearch()</code> は二分探索。単調性は、ゴミ袋の容量 $S$ が大きいと適する、小さいと適さないことに注意。</p>
<p>Rustでの実装</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=fm>macro_rules!</span><span class=w> </span><span class=n>input</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=n>source</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=cp>$s</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=cp>$($r</span>:<span class=nc>tt</span><span class=p>)</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>iter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=cp>$s</span><span class=p>.</span><span class=n>split_whitespace</span><span class=p>();</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>next</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>iter</span><span class=p>.</span><span class=n>next</span><span class=p>().</span><span class=n>unwrap</span><span class=p>()</span><span class=w> </span><span class=p>};</span><span class=w>
</span><span class=w>        </span><span class=n>input_inner</span><span class=o>!</span><span class=p>{</span><span class=n>next</span><span class=p>,</span><span class=w> </span><span class=cp>$($r</span><span class=p>)</span><span class=o>*</span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$($r</span>:<span class=nc>tt</span><span class=p>)</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>stdin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=n>stdin</span><span class=p>();</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>bytes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=n>Read</span>::<span class=n>bytes</span><span class=p>(</span><span class=n>std</span>::<span class=n>io</span>::<span class=n>BufReader</span>::<span class=n>new</span><span class=p>(</span><span class=n>stdin</span><span class=p>.</span><span class=n>lock</span><span class=p>()));</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>next</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>move</span><span class=w> </span><span class=o>||</span><span class=w> </span>-&gt; <span class=nb>String</span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>bytes</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>by_ref</span><span class=p>()</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=o>|</span><span class=n>r</span><span class=o>|</span><span class=n>r</span><span class=p>.</span><span class=n>unwrap</span><span class=p>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>char</span><span class=p>)</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>skip_while</span><span class=p>(</span><span class=o>|</span><span class=n>c</span><span class=o>|</span><span class=n>c</span><span class=p>.</span><span class=n>is_whitespace</span><span class=p>())</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>take_while</span><span class=p>(</span><span class=o>|</span><span class=n>c</span><span class=o>|!</span><span class=n>c</span><span class=p>.</span><span class=n>is_whitespace</span><span class=p>())</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>collect</span><span class=p>()</span><span class=w>
</span><span class=w>        </span><span class=p>};</span><span class=w>
</span><span class=w>        </span><span class=n>input_inner</span><span class=o>!</span><span class=p>{</span><span class=n>next</span><span class=p>,</span><span class=w> </span><span class=cp>$($r</span><span class=p>)</span><span class=o>*</span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=fm>macro_rules!</span><span class=w> </span><span class=n>input_inner</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=cp>$var</span>:<span class=nc>ident</span><span class=w> </span>: <span class=cp>$t</span>:<span class=nc>tt</span><span class=w> </span><span class=cp>$($r</span>:<span class=nc>tt</span><span class=p>)</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=cp>$var</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>read_value</span><span class=o>!</span><span class=p>(</span><span class=cp>$next</span><span class=p>,</span><span class=w> </span><span class=cp>$t</span><span class=p>);</span><span class=w>
</span><span class=w>        </span><span class=n>input_inner</span><span class=o>!</span><span class=p>{</span><span class=cp>$next</span><span class=w> </span><span class=cp>$($r</span><span class=p>)</span><span class=o>*</span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=fm>macro_rules!</span><span class=w> </span><span class=n>read_value</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=cp>$($t</span>:<span class=nc>tt</span><span class=p>),</span><span class=o>*</span><span class=w> </span><span class=p>))</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=p>(</span><span class=w> </span><span class=cp>$(</span><span class=n>read_value</span><span class=o>!</span><span class=p>(</span><span class=cp>$next</span><span class=p>,</span><span class=w> </span><span class=cp>$t</span><span class=p>)),</span><span class=o>*</span><span class=w> </span><span class=p>)</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=cp>$t</span>:<span class=nc>tt</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=cp>$len</span>:<span class=nc>expr</span><span class=w> </span><span class=p>])</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=p>(</span><span class=mi>0</span><span class=o>..</span><span class=cp>$len</span><span class=p>).</span><span class=n>map</span><span class=p>(</span><span class=o>|</span><span class=n>_</span><span class=o>|</span><span class=w> </span><span class=n>read_value</span><span class=o>!</span><span class=p>(</span><span class=cp>$next</span><span class=p>,</span><span class=w> </span><span class=cp>$t</span><span class=p>)).</span><span class=n>collect</span>::<span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>_</span><span class=o>&gt;&gt;</span><span class=p>()</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=n>chars</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>read_value</span><span class=o>!</span><span class=p>(</span><span class=cp>$next</span><span class=p>,</span><span class=w> </span><span class=nb>String</span><span class=p>).</span><span class=n>chars</span><span class=p>().</span><span class=n>collect</span>::<span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=kt>char</span><span class=o>&gt;&gt;</span><span class=p>()</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=n>usize1</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>read_value</span><span class=o>!</span><span class=p>(</span><span class=cp>$next</span><span class=p>,</span><span class=w> </span><span class=kt>usize</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=p>(</span><span class=cp>$next</span>:<span class=nc>expr</span><span class=p>,</span><span class=w> </span><span class=cp>$t</span>:<span class=nc>ty</span><span class=p>)</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=cp>$next</span><span class=p>().</span><span class=n>parse</span>::<span class=o>&lt;</span><span class=cp>$t</span><span class=o>&gt;</span><span class=p>().</span><span class=n>expect</span><span class=p>(</span><span class=s>&#34;Parse error&#34;</span><span class=p>)</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>check</span><span class=p>(</span><span class=n>s</span>: <span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>a</span>: <span class=kp>&amp;</span><span class=p>[</span><span class=kt>i64</span><span class=p>],</span><span class=w> </span><span class=n>k</span>: <span class=kt>usize</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>bool</span> <span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>gar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=n>ea</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=o>*</span><span class=n>ea</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w> </span><span class=c1>// ゴミがでかい
</span><span class=c1></span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=n>gar</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>ea</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>gar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>ea</span><span class=p>;</span><span class=w>
</span><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=k>else</span><span class=p>{</span><span class=w>
</span><span class=w>          </span><span class=n>gar</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>ea</span><span class=p>;</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>gar</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=kc>false</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>binsearch</span><span class=p>(</span><span class=n>low</span>: <span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>high</span>: <span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>a</span>: <span class=kp>&amp;</span><span class=p>[</span><span class=kt>i64</span><span class=p>],</span><span class=w> </span><span class=n>k</span>: <span class=kt>usize</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>high</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>low</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=fm>println!</span><span class=p>(</span><span class=s>&#34;{}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>high</span><span class=p>);</span><span class=w> </span><span class=c1>// 大きいほうが適する
</span><span class=c1></span><span class=w>        </span><span class=k>return</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>low</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>high</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>low</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=n>check</span><span class=p>(</span><span class=n>mid</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=c1>// midが適する
</span><span class=c1></span><span class=w>        </span><span class=n>binsearch</span><span class=p>(</span><span class=n>low</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>binsearch</span><span class=p>(</span><span class=n>mid</span><span class=p>,</span><span class=w> </span><span class=n>high</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>input</span><span class=o>!</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>      </span><span class=n>n</span>: <span class=kt>usize</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=n>k</span>: <span class=kt>usize</span><span class=p>,</span><span class=w>
</span><span class=w>      </span><span class=n>a</span>: <span class=p>[</span><span class=kt>i64</span><span class=p>;</span><span class=w> </span><span class=n>n</span><span class=p>],</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>high</span>: <span class=kt>i64</span> <span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>iter</span><span class=p>().</span><span class=n>sum</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>low</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=n>binsearch</span><span class=p>(</span><span class=n>low</span><span class=p>,</span><span class=w> </span><span class=n>high</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=cp>#[cfg(test)]</span><span class=w>
</span><span class=w></span><span class=k>mod</span> <span class=nn>tests</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=o>*</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>  </span><span class=cp>#[test]</span><span class=w>
</span><span class=w>  </span><span class=k>fn</span> <span class=nf>test_check</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=fm>vec!</span><span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>];</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>check</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=fm>assert!</span><span class=p>(</span><span class=o>!</span><span class=n>out</span><span class=p>);</span><span class=w>
</span><span class=w>  </span><span class=p>}</span><span class=w>
</span><span class=w>  </span><span class=cp>#[test]</span><span class=w>
</span><span class=w>  </span><span class=k>fn</span> <span class=nf>test_check_ok</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=fm>vec!</span><span class=p>[</span><span class=mi>3</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>];</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>check</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=fm>assert!</span><span class=p>(</span><span class=n>out</span><span class=p>);</span><span class=w>
</span><span class=w>  </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span></code></pre></div><h2 id=メモ>メモ</h2>
<ul>
<li>競技中に解けなかった。考え方は合っていてPythonによる実装を行っていたので、競技後にRustで実装し直したら通った。二分探索の最大値を大きく取り過ぎていたかも。</li>
<li>Rustはテストが簡単に書けるので、解き直す時やデバッグ時は関数に分けて単体テストを書くといいかもと感じた。</li>
<li><code>&Vec&lt;i64></code> を引数に書いたら <code>&[i64]</code> をclippyくんに提案されて天才だなあとなった</li>
</ul>
<h2 id=外部リンク>外部リンク</h2>
<ul>
<li><a href=https://betrue12.hateblo.jp/entry/2019/05/11/013403>「答えを決め打つ」タイプの二分探索を使いこなそう , ARMERIA hatena blog</a>
<ul>
<li>&ldquo;典型パターン「最大値の最小化」&ldquo;として紹介されている。</li>
</ul>
</li>
</ul>
</article>
<footer>
<p class=license>
This document is licensed under
<a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noopener noreferrer">CC-BY-4.0</a>
</p>
<p class=repository>
Link to
<a href=https://github.com/uta8a/math-roadmap target=_blank rel="noopener noreferrer">GitHub Repository</a>
</p>
</footer>
</main>
</body>
</html>